{"ast":null,"code":"import env from \"./env\";\nimport keys from \"./lib/key\";\nvar auth = {\n  user: function user(_) {\n    return {\n      username: localStorage.getItem(\"username\"),\n      token: localStorage.getItem(\"token\")\n    };\n  },\n  isSignedIn: function isSignedIn() {\n    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    fetch(\"\".concat(env.getCurrent().api, \"checktoken\"), {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      cache: \"force-cache\",\n      method: \"POST\",\n      body: JSON.stringify({\n        \"client_api_key\": keys.blog_post_api_key,\n        \"token\": auth.user().token\n      })\n    }).then(function (res) {\n      res.json().then(function (res) {\n        res = JSON.parse(res);\n        console.log(res);\n\n        if (res.type === \"sucsess\") {\n          auth.canBeHere();\n        } else if (res.type === \"error\") {\n          auth.signOut();\n          window.location = \"/\";\n        } else {\n          window.location = \"/\";\n        }\n      });\n    });\n  },\n  signOut: function signOut() {\n    if (localStorage.getItem(\"user-signed-in\") === \"false\" ? false : true) {\n      localStorage.clear();\n      window.location.reload();\n    }\n  },\n  isAValidUser: function isAValidUser() {},\n  canBeHere: function canBeHere() {\n    var url = window.location.href;\n    var userTypes = {\n      NOT_SIGNED_IN: [\"/\"],\n      AUTHOR: [\"/\", \"/dashboard/analytics\", \"/createpost\", \"/editprofile\"],\n      BASIC_USER: [\"/\", \"/editprofile\"]\n    };\n    console.log(userTypes.BASIC_USER);\n\n    switch (localStorage.getItem(\"type\")) {\n      case \"author\":\n        if (!userTypes.AUTHOR.includes(url)) {\n          window.location = \"/\";\n        } else {\n          return;\n        }\n\n        break;\n\n      case \"basic_user\":\n        if (!userTypes.BASIC_USER.includes(url)) {\n          window.location = \"/\";\n        } else {\n          return;\n        }\n\n        break;\n\n      case null:\n        if (!userTypes.NOT_SIGNED_IN.includes(url)) {\n          window.location = \"/\";\n        } else {\n          return;\n        }\n\n        break;\n\n      default:\n        if (!userTypes.NOT_SIGNED_IN.contains(url)) {\n          window.location = \"/\";\n        } else {\n          return;\n        }\n\n        break;\n    }\n  }\n};\nexport default auth;","map":{"version":3,"sources":["/Users/augustusrizza/javascript_projects/blog/frontend/src/auth.js"],"names":["env","keys","auth","user","_","username","localStorage","getItem","token","isSignedIn","callback","fetch","getCurrent","api","headers","cache","method","body","JSON","stringify","blog_post_api_key","then","res","json","parse","console","log","type","canBeHere","signOut","window","location","clear","reload","isAValidUser","url","href","userTypes","NOT_SIGNED_IN","AUTHOR","BASIC_USER","includes","contains"],"mappings":"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","sourcesContent":["import env from \"./env\";\nimport keys from \"./lib/key\"\n\nlet auth = {\n    user: _ => {\n        return {\n            username: localStorage.getItem(\"username\"),\n            token: localStorage.getItem(\"token\")\n        }\n    },\n    isSignedIn: (callback = null) => {\n        fetch(`${env.getCurrent().api}checktoken`, {\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                cache: \"force-cache\",\n                method: \"POST\",\n                body: JSON.stringify({\n                    \"client_api_key\": keys.blog_post_api_key,\n                    \"token\": auth.user().token\n                })\n\n            }).then(res => {\n                res.json()\n                    .then(res => {\n                        res = JSON.parse(res)\n                        console.log(res)\n                        if (res.type === \"sucsess\") {\n                            auth.canBeHere()\n                        } else if (res.type === \"error\") {\n                            auth.signOut();\n                             window.location = \"/\"\n                            \n                        } else {\n                            window.location = \"/\"\n                        }\n                    })\n            })\n    },\n    signOut: () => {\n        if ((localStorage.getItem(\"user-signed-in\") === \"false\" ? false : true)) {\n            localStorage.clear()\n            window.location.reload();\n        }\n\n    },\n    isAValidUser: () => {\n\n    },\n    canBeHere: () => {\n        let url = window.location.href;\n        let userTypes = {\n            NOT_SIGNED_IN: [\"/\"],\n            AUTHOR: [\"/\", \"/dashboard/analytics\", \"/createpost\", \"/editprofile\"],\n            BASIC_USER: [\"/\", \"/editprofile\"]\n        }\n        console.log(userTypes.BASIC_USER)\n        switch (localStorage.getItem(\"type\")) {\n            case \"author\":\n                if (!userTypes.AUTHOR.includes(url)) {\n                    window.location = \"/\";\n                } else {\n                    return;\n                }\n                break;\n            case \"basic_user\":\n                if (!userTypes.BASIC_USER.includes(url)) {\n                    window.location = \"/\";\n                } else {\n                    return;\n                }\n                break;\n            case null:\n                if (!userTypes.NOT_SIGNED_IN.includes(url)) {\n                    window.location = \"/\";\n                } else {\n                    return;\n                }\n                break;\n            default:\n                if (!userTypes.NOT_SIGNED_IN.contains(url)) {\n                    window.location = \"/\";\n                } else {\n                    return;\n                }\n                break;\n\n        }\n    }\n};\n\nexport default auth;"]},"metadata":{},"sourceType":"module"}