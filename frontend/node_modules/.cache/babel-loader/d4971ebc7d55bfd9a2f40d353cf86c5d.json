{"ast":null,"code":"import _classCallCheck from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/augustusrizza/javascript_projects/blog/frontend/src/Signup.js\";\nimport React, { Component } from 'react';\nimport SHA256 from 'crypto-js/sha256';\nimport CryptoJS from 'crypto-js';\nimport keys from \"./lib/key\";\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n    _this.handleSignUp = _this.handleSignUp.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.formPreventDefault = _this.formPreventDefault.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleEmailCheck = _this.handleEmailCheck.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePasswordCheck = _this.handlePasswordCheck.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUsernameCheck = _this.handleUsernameCheck.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"formPreventDefault\",\n    value: function formPreventDefault(event) {\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleUsernameCheck\",\n    value: function handleUsernameCheck() {\n      var usernameInput = document.getElementById(\"username\"),\n          signUpButton = document.getElementById(\"signUp\");\n\n      if (usernameInput.value.length > 0) {\n        fetch(\"http://localhost:5000/checkusername/\".concat(usernameInput.value), {\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          method: \"POST\",\n          body: JSON.stringify({\n            \"client_api_key\": keys.blog_post_api_key\n          })\n        }).then(function (response) {\n          response.json().then(function (res) {\n            res = JSON.parse(res);\n\n            if (res.type === \"error\") {\n              usernameInput.classList = \"uk-input uk-form-width-large uk-form-danger\";\n              signUpButton.setAttribute(\"disabled\", \"true\");\n              usernameInput.setAttribute(\"uk-tooltip\", \"title: \".concat(res.response, \"; pos: right\"));\n            } else {\n              signUpButton.removeAttribute(\"disabled\");\n              usernameInput.removeAttribute(\"uk-tooltip\");\n              usernameInput.classList = \"uk-input uk-form-width-large uk-form-primary\";\n            }\n          });\n        });\n      } else {}\n    }\n  }, {\n    key: \"validateEmail\",\n    value: function validateEmail(email) {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(email);\n    }\n  }, {\n    key: \"handleEmailCheck\",\n    value: function handleEmailCheck() {\n      var emailInput = document.getElementById(\"email\"),\n          signUpButton = document.getElementById(\"signUp\"),\n          email = emailInput.value;\n\n      if (this.validateEmail(email)) {\n        // check if used\n        fetch(\"http://localhost:5000/checkemail/\".concat(email), {\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          method: \"POST\",\n          body: JSON.stringify({\n            \"client_api_key\": keys.blog_post_api_key\n          })\n        }).then(function (response) {\n          response.json().then(function (res) {\n            res = JSON.parse(res);\n\n            if (res.type === \"error\") {\n              emailInput.classList = \"uk-input uk-form-width-large uk-form-danger\";\n              emailInput.setAttribute(\"uk-tooltip\", \"title: \".concat(res.response, \"; pos: right\"));\n            } else {\n              signUpButton.removeAttribute(\"disabled\");\n              emailInput.removeAttribute(\"uk-tooltip\");\n              emailInput.classList = \"uk-input uk-form-width-large uk-form-primary\";\n            }\n          });\n        });\n      } else {\n        signUpButton.setAttribute(\"disabled\", \"true\");\n        emailInput.removeAttribute(\"uk-tooltip\");\n        emailInput.classList = \"uk-input uk-form-width-large uk-form-danger\";\n      }\n    }\n  }, {\n    key: \"encryptPassword\",\n    value: function encryptPassword(password) {\n      var current_date = new Date().valueOf().toString();\n      var random = Math.random().toString();\n      var hash = SHA256(current_date + random);\n      return {\n        \"token\": hash.toString(CryptoJS.enc.Base64),\n        \"password\": SHA256(hash + password).toString(CryptoJS.enc.Base64)\n      };\n    }\n  }, {\n    key: \"handlePasswordCheck\",\n    value: function handlePasswordCheck() {\n      var password = document.getElementById(\"password\"),\n          length = document.getElementById(\"length\"),\n          lun = document.getElementById(\"lun\"),\n          tod = [false, false, false],\n          signUpButton = document.getElementById(\"signUp\");\n      special = document.getElementById(\"special\");\n\n      if (password.value.length > 8) {\n        tod[0] = true;\n        length.setAttribute(\"uk-icon\", \"icon : check\");\n      } else {\n        tod[0] = false;\n        length.setAttribute(\"uk-icon\", \"icon : chevron-right\");\n      }\n\n      if (tod.every(function (e) {\n        e === true ? true : false;\n      })) {\n        signUpButton.setAttribute(\"disabled\", \"false\");\n      } else {\n        signUpButton.setAttribute(\"disabled\", \"true\");\n      }\n    }\n  }, {\n    key: \"handleSignUp\",\n    value: function handleSignUp() {\n      console.log(\"handling sign up\");\n      var username = document.getElementById(\"username\").value,\n          email = document.getElementById(\"email\").value,\n          password = document.getElementById(\"password\").value;\n      password = this.encryptPassword(password);\n      fetch(\"http://localhost:5000/signup\", {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          \"client_api_key\": keys.blog_post_api_key,\n          \"new_user\": {\n            \"username\": username,\n            \"email\": email,\n            \"password\": password.password,\n            \"hash\": password.hash\n          }\n        })\n      }).then(function (response) {\n        response.json().then(function (res) {\n          if (res.type === \"sucsess\") {\n            window.location.href = \"/\";\n          }\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"uk-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-card uk-card-default uk-card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Sign Up\"), React.createElement(\"form\", {\n        onSubmit: this.formPreventDefault,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon\",\n        \"uk-icon\": \"icon: user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        id: \"username\",\n        type: \"text\",\n        onChange: this.handleUsernameCheck,\n        placeholder: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon\",\n        \"uk-icon\": \"icon: user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        type: \"text\",\n        id: \"email\",\n        onChange: this.handleEmailCheck,\n        placeholder: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon uk-form-icon\",\n        \"uk-icon\": \"icon: lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        type: \"password\",\n        id: \"password\",\n        onChange: this.handlePasswordCheck,\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        classNmae: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        class: \"uk-list uk-link-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"length\",\n        \"uk-icon\": \"chevron-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), \" password should be atleast 8 characters long\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"lun\",\n        \"uk-icon\": \"chevron-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), \" password should have a lowercase, uppercase, number \"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"special\",\n        \"uk-icon\": \"chevron-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), \" password should have a special character (!@#$%&....)\")))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        id: \"signUp\",\n        className: \"uk-button uk-button-primary uk-form-width-large\",\n        onClick: this.handleSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Sign Up\"))))));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\n;\nexport default Signup;","map":{"version":3,"sources":["/Users/augustusrizza/javascript_projects/blog/frontend/src/Signup.js"],"names":["React","Component","SHA256","CryptoJS","keys","Signup","props","handleSignUp","bind","formPreventDefault","handleEmailCheck","handlePasswordCheck","handleUsernameCheck","event","preventDefault","usernameInput","document","getElementById","signUpButton","value","length","fetch","headers","method","body","JSON","stringify","blog_post_api_key","then","response","json","res","parse","type","classList","setAttribute","removeAttribute","email","re","test","emailInput","validateEmail","password","current_date","Date","valueOf","toString","random","Math","hash","enc","Base64","lun","tod","special","every","e","console","log","username","encryptPassword","window","location","href"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport SHA256 from 'crypto-js/sha256'\nimport CryptoJS from 'crypto-js'\nimport keys from \"./lib/key\"\n\n\nclass Signup extends Component {\n\n    constructor(props) {\n        super(props)\n        this.handleSignUp = this\n            .handleSignUp\n            .bind(this)\n        this.formPreventDefault = this\n            .formPreventDefault\n            .bind(this)\n        this.handleEmailCheck = this\n            .handleEmailCheck\n            .bind(this)\n        this.handlePasswordCheck = this\n            .handlePasswordCheck\n            .bind(this)\n        this.handleUsernameCheck = this\n            .handleUsernameCheck\n            .bind(this)\n    }\n\n    formPreventDefault(event) {\n        event.preventDefault();\n    }\n    handleUsernameCheck() {\n        let usernameInput = document.getElementById(\"username\"),\n        signUpButton = document.getElementById(\"signUp\")\n        if(usernameInput.value.length > 0) {\n        fetch(`http://localhost:5000/checkusername/${usernameInput.value}`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key})\n        }).then( response => {\n            response.json().then(res => {\n                res = JSON.parse(res)\n                if (res.type === \"error\") {\n                    usernameInput.classList = \"uk-input uk-form-width-large uk-form-danger\"\n                    signUpButton.setAttribute(\"disabled\", \"true\")\n                    usernameInput.setAttribute(\"uk-tooltip\", `title: ${res.response}; pos: right`)\n                } else {\n                    signUpButton.removeAttribute(\"disabled\")\n                    usernameInput.removeAttribute(\"uk-tooltip\")\n                    usernameInput.classList = \"uk-input uk-form-width-large uk-form-primary\"\n                }\n            })\n        })\n        } else {\n\n        }\n        \n        }\n\n    validateEmail(email) {\n        var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(email);\n    }\n\n    handleEmailCheck() {\n        let emailInput = document.getElementById(\"email\"),\n            signUpButton = document.getElementById(\"signUp\"),\n            email = emailInput.value\n        if (this.validateEmail(email)) {\n            // check if used\n            fetch(`http://localhost:5000/checkemail/${email}`, {\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                method: \"POST\",\n                body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key})\n            }).then( response => {\n                    response.json().then(res => {\n                        res = JSON.parse(res)\n                        if (res.type === \"error\") {\n                            emailInput.classList = \"uk-input uk-form-width-large uk-form-danger\"\n                            emailInput.setAttribute(\"uk-tooltip\", `title: ${res.response}; pos: right`)\n                        } else {\n                            signUpButton.removeAttribute(\"disabled\")\n                            emailInput.removeAttribute(\"uk-tooltip\")\n                            emailInput.classList = \"uk-input uk-form-width-large uk-form-primary\"\n                        }\n                    })\n                })\n        } else {\n            signUpButton.setAttribute(\"disabled\", \"true\")\n            emailInput.removeAttribute(\"uk-tooltip\")\n            emailInput.classList = \"uk-input uk-form-width-large uk-form-danger\"\n        }\n    }\n    encryptPassword(password) {\n        var current_date = (new Date()).valueOf().toString();\n        var random = Math.random().toString();\n        let hash = SHA256(current_date + random);\n        return { \n            \"token\" : hash.toString(CryptoJS.enc.Base64),\n            \"password\" : SHA256(hash + password).toString(CryptoJS.enc.Base64)\n            };\n    }\n    handlePasswordCheck() {\n        let password = document.getElementById(\"password\"),\n        length = document.getElementById(\"length\"),\n        lun = document.getElementById(\"lun\"),\n        tod = [false, false, false],\n        signUpButton = document.getElementById(\"signUp\")\n        special = document.getElementById(\"special\");\n        if(password.value.length > 8) {\n            tod[0] = true\n            length.setAttribute(\"uk-icon\", \"icon : check\")\n        } else {\n            tod[0] = false\n            length.setAttribute(\"uk-icon\", \"icon : chevron-right\")\n        }\n\n\n        \n        if (tod.every( (e) => { e === true ? true : false}) ) {\n            signUpButton.setAttribute(\"disabled\", \"false\")\n        } else {\n            signUpButton.setAttribute(\"disabled\", \"true\")\n        }\n    }\n    handleSignUp() {\n        console.log(\"handling sign up\")\n        let username = document\n                .getElementById(\"username\")\n                .value,\n            email = document\n                .getElementById(\"email\")\n                .value,\n            password = document\n                .getElementById(\"password\")\n                .value;\n            password = this.encryptPassword(password)\n\n        fetch(`http://localhost:5000/signup`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key, \"new_user\" : {\n                \"username\" : username,\n                \"email\" : email,\n                \"password\" : password.password,\n                \"hash\" : password.hash\n            }})\n        }).then(response => {\n            response.json().then(res => {\n                if (res.type === \"sucsess\") {\n                    window.location.href = \"/\"\n                }\n            })\n        })\n\n    }\n\n    render() {\n\n        return (\n            <div className=\"uk-container\">\n                <div className=\"uk-card uk-card-default uk-card-body\">\n                    <h1>Sign Up</h1>\n                    <form onSubmit={this.formPreventDefault}>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon\" uk-icon=\"icon: user\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    id=\"username\"\n                                    type=\"text\"\n                                    onChange={this.handleUsernameCheck}\n                                    placeholder=\"username\"/>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon\" uk-icon=\"icon: user\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    type=\"text\"\n                                    id=\"email\"\n                                    onChange={this.handleEmailCheck}\n                                    placeholder=\"email\"/>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon uk-form-icon\" uk-icon=\"icon: lock\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    type=\"password\"\n                                    id=\"password\"\n                                    onChange={this.handlePasswordCheck}\n                                    placeholder=\"password\"/>\n                            </div>\n                        </div>\n                        <div classNmae=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                            <ul class=\"uk-list uk-link-text\">\n                                <li><span id=\"length\" uk-icon=\"chevron-right\"></span> password should be atleast 8 characters long</li>\n                                <li><span id=\"lun\" uk-icon=\"chevron-right\"></span> password should have a lowercase, uppercase, number </li>\n                                <li><span id=\"special\" uk-icon=\"chevron-right\"></span> password should have a special character (!@#$%&....)</li>\n                            </ul>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <button\n                                    id=\"signUp\"\n                                    className=\"uk-button uk-button-primary uk-form-width-large\"\n                                    onClick={this.handleSignUp}>Sign Up</button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}