{"ast":null,"code":"import _classCallCheck from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/augustusrizza/javascript_projects/blog/frontend/src/Signin.js\";\nimport React, { Component } from 'react';\nimport SHA256 from 'crypto-js/sha256';\nimport keys from \"./lib/key\";\nimport env from \"./env\";\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n    _this.formPreventDefault = _this.formPreventDefault.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.formChange = _this.formChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"formPreventDefault\",\n    value: function formPreventDefault(event) {\n      event.preventDefault();\n      this.handleSignIn();\n    }\n  }, {\n    key: \"formChange\",\n    value: function formChange() {\n      var username = document.getElementById(\"username\").value.length,\n          password = document.getElementById(\"password\").value.length;\n\n      if (username > 0 && password > 0) {\n        document.getElementById(\"signIn\").removeAttribute(\"disabled\");\n      } else {\n        document.getElementById(\"signIn\").setAttribute(\"disabled\", \"true\");\n      }\n    }\n  }, {\n    key: \"encryptPassword\",\n    value: function encryptPassword(password, salt) {\n      return SHA256(password).toString();\n    }\n  }, {\n    key: \"handleSignIn\",\n    value: function handleSignIn() {\n      var _this2 = this;\n\n      var username = document.getElementById(\"username\").value,\n          password = document.getElementById(\"password\").value; // fetch salt for password\n\n      fetch(\"\".concat(env.getCurrent().api, \"salt\"), {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          \"client_api_key\": keys.blog_post_api_key,\n          \"username\": username\n        })\n      }).then(function (response) {\n        response.json().then(function (res) {\n          console.log(res);\n          res = JSON.parse(res); // create salted password\n\n          var saltedPassword = _this2.encryptPassword(res.salt, password);\n\n          fetch(\"\".concat(env.getCurrent().api, \"signin\"), {\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\n              \"client_api_key\": keys.blog_post_api_key,\n              user: {\n                \"username_or_email\": username,\n                \"password\": saltedPassword\n              }\n            })\n          }).then(function (response) {\n            response.json().then(function (res) {\n              console.log(res);\n            });\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"uk-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-card uk-card-default uk-card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(\"form\", {\n        onSubmit: this.formPreventDefault,\n        onChange: this.formChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon\",\n        \"uk-icon\": \"icon: user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        id: \"username\",\n        type: \"text\",\n        placeholder: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon uk-form-icon\",\n        \"uk-icon\": \"icon: lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        type: \"password\",\n        id: \"password\",\n        autoComplete: \"off\",\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"signIn\",\n        type: \"submit\",\n        className: \"uk-input uk-button uk-button-primary uk-form-width-large\",\n        disabled: \"true\",\n        value: \"Sign In\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\n;\nexport default Signup;","map":{"version":3,"sources":["/Users/augustusrizza/javascript_projects/blog/frontend/src/Signin.js"],"names":["React","Component","SHA256","keys","env","Signup","props","formPreventDefault","bind","formChange","event","preventDefault","handleSignIn","username","document","getElementById","value","length","password","removeAttribute","setAttribute","salt","toString","fetch","getCurrent","api","headers","method","body","JSON","stringify","blog_post_api_key","then","response","json","res","console","log","parse","saltedPassword","encryptPassword","user"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport SHA256 from 'crypto-js/sha256'\nimport keys from \"./lib/key\"\nimport env from \"./env\"\n\nclass Signup extends Component {\n    constructor(props) {\n        super(props);\n        this.formPreventDefault = this\n            .formPreventDefault\n            .bind(this);\n        this.formChange = this\n            .formChange\n            .bind(this)\n    }\n\n    formPreventDefault(event) {\n        event.preventDefault();\n        this.handleSignIn();\n    }\n    formChange() {\n        let username = document\n                .getElementById(\"username\")\n                .value\n                .length,\n            password = document\n                .getElementById(\"password\")\n                .value\n                .length;\n        if (username > 0 && password > 0) {\n            document\n                .getElementById(\"signIn\")\n                .removeAttribute(\"disabled\")\n        } else {\n            document\n                .getElementById(\"signIn\")\n                .setAttribute(\"disabled\", \"true\")\n        }\n    }\n\n    encryptPassword(password, salt) {\n        return SHA256(password).toString()\n    }\n\n    handleSignIn() {\n        let username = document\n                .getElementById(\"username\")\n                .value,\n            password = document\n                .getElementById(\"password\")\n                .value;\n        // fetch salt for password\n        fetch(`${env.getCurrent().api}salt`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key, \"username\": username})\n        }).then(response => {\n            response\n                .json()\n                .then(res => {\n                    console.log(res)\n                    res = JSON.parse(res)\n                    // create salted password\n                    let saltedPassword = this.encryptPassword(res.salt, password)\n                    fetch(`${env.getCurrent().api}signin`, {\n                        headers: {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        method: \"POST\",\n                        body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key, user: {\"username_or_email\" : username, \"password\" : saltedPassword}})\n                    }).then(response => {\n                        response.json().then(res => {\n                            console.log(res)\n                        })\n                    })\n                })\n        })\n\n    }\n    render() {\n\n        return (\n            <div className=\"uk-container\">\n                <div className=\"uk-card uk-card-default uk-card-body\">\n                    <h1>Sign In</h1>\n                    <form onSubmit={this.formPreventDefault} onChange={this.formChange}>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon\" uk-icon=\"icon: user\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    id=\"username\"\n                                    type=\"text\"\n                                    placeholder=\"username\"/>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon uk-form-icon\" uk-icon=\"icon: lock\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    type=\"password\"\n                                    id=\"password\"\n                                    autoComplete=\"off\"\n                                    placeholder=\"password\"/>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <input\n                                    id=\"signIn\"\n                                    type=\"submit\"\n                                    className=\"uk-input uk-button uk-button-primary uk-form-width-large\"\n                                    disabled=\"true\"\n                                    value=\"Sign In\"/>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}