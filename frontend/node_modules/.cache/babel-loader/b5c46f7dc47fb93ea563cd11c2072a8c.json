{"ast":null,"code":"import _defineProperty from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _assertThisInitialized from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/augustusrizza/javascript_projects/blog/frontend/src/CreatePost.js\";\nimport React, { Component } from 'react';\nimport { Editor, EditorState, RichUtils, getDefaultKeyBinding } from 'draft-js';\nimport { stateToMarkdown } from \"draft-js-export-markdown\";\nimport keys from \"./lib/key\";\nimport env from \"./env\";\nimport auth from \"./auth\";\n\nfunction uuidv4() {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n    return (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n  });\n}\n\nvar Alert =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Alert, _Component);\n\n  function Alert(props) {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alert).call(this, props));\n    _this.state = {\n      alert: null\n    };\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.alert !== this.props.alert) {\n        this.setState({\n          alert: this.props.alert\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.alert !== null) {\n        if (this.state.alert.type === \"error\") {\n          return React.createElement(\"div\", {\n            className: \"uk-alert-danger\",\n            \"uk-alert\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 30\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            className: \"uk-alert-close\",\n            \"uk-close\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 31\n            },\n            __self: this\n          }), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 32\n            },\n            __self: this\n          }, this.state.alert.response));\n        } else {\n          return React.createElement(\"div\", {\n            className: \"uk-alert-primary\",\n            \"uk-alert\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            className: \"uk-alert-close\",\n            \"uk-close\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38\n            },\n            __self: this\n          }), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39\n            },\n            __self: this\n          }, this.state.alert.response));\n        }\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return Alert;\n}(Component);\n\nvar CreatePost =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(CreatePost, _Component2);\n\n  function CreatePost(props) {\n    var _this2;\n\n    _classCallCheck(this, CreatePost);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(CreatePost).call(this, props));\n    var uuid = uuidv4();\n    _this2.state = {\n      id: uuid,\n      alert: null,\n      title: \"\",\n      editorState: EditorState.createEmpty()\n    };\n    _this2._onTitleChange = _this2._onTitleChange.bind(_assertThisInitialized(_assertThisInitialized(_this2)));\n\n    _this2.onChange = function (editorState) {\n      _this2.setState({\n        editorState: editorState\n      });\n    };\n\n    return _this2;\n  }\n\n  _createClass(CreatePost, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      auth.isSignedIn().then(function (user) {\n        if (!user.isSignedIn) {\n          window.location = \"/\";\n        }\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.clearAlert = this.clearAlert.bind(this);\n      document.addEventListener(\"click\", this.clearAlert);\n    }\n  }, {\n    key: \"clearAlert\",\n    value: function clearAlert(event) {\n      if (event.target.tagName === \"svg\" && event.target.parentElement.classList.contains(\"uk-alert-close\")) {\n        this.setState({\n          alert: null\n        });\n      }\n    }\n  }, {\n    key: \"_onTitleChange\",\n    value: function _onTitleChange(e) {\n      this.setState({\n        title: document.getElementById(\"title\").value\n      });\n    }\n  }, {\n    key: \"_onSaveClick\",\n    value: function _onSaveClick(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var save = {\n        id: this.state.id,\n        timeStamp: new Date(),\n        title: this.state.title,\n        author: localStorage.getItem(\"username\"),\n        content: stateToMarkdown(this.state.editorState.getCurrentContent())\n      };\n      fetch(\"\".concat(env.getCurrent().api, \"new_post\"), {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          \"client_api_key\": keys.blog_post_api_key,\n          post: save\n        })\n      }).then(function (Response) {\n        Response.json().then(function (res) {\n          res = JSON.parse(res);\n\n          _this3.setState({\n            alert: res\n          });\n        });\n      });\n    }\n  }, {\n    key: \"_onBoldClick\",\n    value: function _onBoldClick(e) {\n      e.preventDefault();\n      this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, 'BOLD'));\n    }\n  }, {\n    key: \"_onItalicClick\",\n    value: function _onItalicClick(e) {\n      e.preventDefault();\n      this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, 'ITALIC'));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      return React.createElement(\"div\", {\n        className: \"uk-container uk-padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Alert, {\n        alert: this.state.alert,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"fieldset\", {\n        className: \"uk-fieldset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-card uk-card-primary uk-light  uk-card-small uk-card-body\",\n        style: {\n          zIndex: 980\n        },\n        \"uk-sticky\": \"bottom: #offset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement = {\n        className: \"uk-input uk-form-large\",\n        id: \"title\",\n        onChange: this._onTitleChange\n      }, _defineProperty(_React$createElement, \"id\", \"title\"), _defineProperty(_React$createElement, \"placeholder\", \"Post Title\"), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-align-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this._onBoldClick.bind(this),\n        className: \"uk-icon-link uk-icon-button uk-margin-small-right\",\n        \"uk-icon\": \"bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this._onItalicClick.bind(this),\n        className: \"uk-icon-link uk-icon-button uk-margin-small-right\",\n        \"uk-icon\": \"italic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"uk-align-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this._onSaveClick.bind(this),\n        className: \"uk-icon-link uk-icon-button uk-margin-small-right\",\n        \"uk-icon\": \"cloud-upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"uk-align-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"uk-icon-link uk-icon-button uk-margin-small-right\",\n        \"uk-icon\": \"cloud-download\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        \"uk-drop\": \"mode: click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-card uk-card-body uk-card-secondary uk-text-emphasis\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"feature coming soon\", React.createElement(\"ul\", {\n        className: \"uk-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"test\")))))))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(Editor, {\n        editorState: this.state.editorState,\n        onChange: this.onChange,\n        onTab: this.handleKeyBindings,\n        placeholder: \"Type Something Amazing....\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return CreatePost;\n}(Component);\n\nexport default CreatePost;","map":{"version":3,"sources":["/Users/augustusrizza/javascript_projects/blog/frontend/src/CreatePost.js"],"names":["React","Component","Editor","EditorState","RichUtils","getDefaultKeyBinding","stateToMarkdown","keys","env","auth","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","Alert","props","state","alert","prevProps","prevState","setState","type","response","CreatePost","uuid","id","title","editorState","createEmpty","_onTitleChange","bind","onChange","isSignedIn","then","user","window","location","clearAlert","document","addEventListener","event","target","tagName","parentElement","classList","contains","e","getElementById","value","preventDefault","save","timeStamp","Date","author","localStorage","getItem","content","getCurrentContent","fetch","getCurrent","api","headers","method","body","JSON","stringify","blog_post_api_key","post","Response","json","res","parse","toggleInlineStyle","zIndex","_onBoldClick","_onItalicClick","_onSaveClick","handleKeyBindings"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nimport {Editor, EditorState, RichUtils, getDefaultKeyBinding} from 'draft-js';\nimport {stateToMarkdown} from \"draft-js-export-markdown\";\nimport keys from \"./lib/key\";\nimport env from \"./env\";\nimport auth from \"./auth\";\n\nfunction uuidv4() {\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16))\n}\n\nclass Alert extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            alert: null\n        }\n    }\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.alert !== this.props.alert) {\n            this.setState({alert: this.props.alert})\n        }\n\n    }\n    render() {\n        if (this.state.alert !== null) {\n            if (this.state.alert.type === \"error\") {\n                return (\n                    <div className=\"uk-alert-danger\" uk-alert=\"true\">\n                        <a className=\"uk-alert-close\" uk-close=\"true\"></a>\n                        <p>{this.state.alert.response}</p>\n                    </div>\n                )\n            } else {\n                return (\n                    <div className=\"uk-alert-primary\" uk-alert=\"true\">\n                        <a className=\"uk-alert-close\" uk-close=\"true\"></a>\n                        <p>{this.state.alert.response}</p>\n                    </div>\n                )\n            }\n        } else {\n            return (\n                <div></div>\n            )\n        }\n\n    }\n}\n\nclass CreatePost extends Component {\n    constructor(props) {\n        super(props);\n        let uuid = uuidv4()\n        this.state = {\n            id: uuid,\n            alert: null,\n            title: \"\",\n            editorState: EditorState.createEmpty()\n        };\n        this._onTitleChange = this\n            ._onTitleChange\n            .bind(this)\n        this.onChange = (editorState) => {\n            this.setState({editorState})\n        };\n    }\n\n    componentWillMount() {\n        auth.isSignedIn().then( user => {\n            if(!user.isSignedIn) {\n                window.location = \"/\"\n            }\n        })\n    }\n\n    componentDidMount() {\n        this.clearAlert = this\n            .clearAlert\n            .bind(this)\n        document.addEventListener(\"click\", this.clearAlert)\n    }\n\n    clearAlert(event) {\n        if (event.target.tagName === \"svg\" && event.target.parentElement.classList.contains(\"uk-alert-close\")) {\n            this.setState({alert: null})\n        }\n    }\n\n    _onTitleChange(e) {\n        this.setState({\n            title: document\n                .getElementById(\"title\")\n                .value\n        })\n    }\n    _onSaveClick(e) {\n        e.preventDefault()\n        let save = {\n            id: this.state.id,\n            timeStamp: new Date(),\n            title: this.state.title,\n            author: localStorage.getItem(\"username\"),\n            content: stateToMarkdown(this.state.editorState.getCurrentContent())\n        }\n        fetch(`${env.getCurrent().api}new_post`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key, post: save})\n\n        }).then(Response => {\n            Response\n                .json()\n                .then(res => {\n                    res = JSON.parse(res)\n                    this.setState({alert: res})\n                })\n        });\n    }\n\n    _onBoldClick(e) {\n        e.preventDefault()\n        this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, 'BOLD'));\n    }\n    _onItalicClick(e) {\n        e.preventDefault()\n        this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, 'ITALIC'));\n    }\n    render() {\n\n        return (\n            <div className=\"uk-container uk-padding\">\n                <Alert alert={this.state.alert}/>\n                <form>\n                    <fieldset className=\"uk-fieldset\">\n\n                        <div\n                            className=\"uk-card uk-card-primary uk-light  uk-card-small uk-card-body\"\n                            style={{\n                            zIndex: 980\n                        }}\n                            uk-sticky=\"bottom: #offset\">\n                            <div className=\"uk-margin\">\n                                <input\n                                    className=\"uk-input uk-form-large\"\n                                    id=\"title\"\n                                    onChange={this._onTitleChange}\n                                    id=\"title\"\n                                    placeholder=\"Post Title\"/>\n                            </div>\n                            <div className=\"uk-margin\">\n                                <div className=\"uk-align-left\">\n                                    <button\n                                        onClick={this\n                                        ._onBoldClick\n                                        .bind(this)}\n                                        className=\"uk-icon-link uk-icon-button uk-margin-small-right\"\n                                        uk-icon=\"bold\"></button>\n                                    <button\n                                        onClick={this\n                                        ._onItalicClick\n                                        .bind(this)}\n                                        className=\"uk-icon-link uk-icon-button uk-margin-small-right\"\n                                        uk-icon=\"italic\"></button>\n                                </div>\n                                <div className=\"uk-align-right\">\n                                    <button\n                                        onClick={this\n                                        ._onSaveClick\n                                        .bind(this)}\n                                        className=\"uk-icon-link uk-icon-button uk-margin-small-right\"\n                                        uk-icon=\"cloud-upload\"></button>\n                                </div>\n                                <div className=\"uk-align-right\">\n                                    <button\n                                        className=\"uk-icon-link uk-icon-button uk-margin-small-right\"\n                                        uk-icon=\"cloud-download\"></button>\n                                    <div uk-drop=\"mode: click\">\n                                        <div className=\"uk-card uk-card-body uk-card-secondary uk-text-emphasis\">\n                                            feature coming soon\n                                            <ul className=\"uk-list\">\n                                                <li>\n                                                    <a href=\"#\">test</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <br/>\n                        <Editor\n                            editorState={this.state.editorState}\n                            onChange={this.onChange}\n                            onTab={this.handleKeyBindings}\n                            placeholder=\"Type Something Amazing....\"/>\n                    </fieldset>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default CreatePost;"]},"metadata":{},"sourceType":"module"}