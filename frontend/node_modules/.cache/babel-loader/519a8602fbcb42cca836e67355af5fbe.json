{"ast":null,"code":"import _classCallCheck from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/augustusrizza/javascript_projects/blog/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/augustusrizza/javascript_projects/blog/frontend/src/Signin.js\";\nimport React, { Component } from 'react';\nimport encrypt from './encrypt';\nimport keys from \"./lib/key\";\nimport env from \"./env\";\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n    _this.formPreventDefault = _this.formPreventDefault.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.formChange = _this.formChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      alerts: null\n    };\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"formPreventDefault\",\n    value: function formPreventDefault(event) {\n      event.preventDefault();\n      this.handleSignIn();\n    }\n  }, {\n    key: \"formChange\",\n    value: function formChange() {\n      var username = document.getElementById(\"username\").value.length,\n          password = document.getElementById(\"password\").value.length;\n\n      if (username > 0 && password > 0) {\n        document.getElementById(\"signIn\").removeAttribute(\"disabled\");\n      } else {\n        document.getElementById(\"signIn\").setAttribute(\"disabled\", \"true\");\n      }\n    }\n  }, {\n    key: \"handleSignIn\",\n    value: function handleSignIn() {\n      var _this2 = this;\n\n      var username = document.getElementById(\"username\").value,\n          password = document.getElementById(\"password\").value;\n      console.log(password); // fetch salt for password\n\n      fetch(\"\".concat(env.getCurrent().api, \"salt\"), {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          \"client_api_key\": keys.blog_post_api_key,\n          \"username\": username\n        })\n      }).then(function (response) {\n        response.json().then(function (res) {\n          console.log(res);\n          res = JSON.parse(res); // create salted password\n\n          var saltedPassword = encrypt.reproduce_set(password, res.salt);\n          fetch(\"\".concat(env.getCurrent().api, \"signin\"), {\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\n              \"client_api_key\": keys.blog_post_api_key,\n              user: {\n                \"username_or_email\": username,\n                \"password\": saltedPassword.password\n              }\n            })\n          }).then(function (response) {\n            response.json().then(function (res) {\n              console.log(res);\n              res = JSON.parse(res);\n              console.log(res);\n\n              if (res.type === \"error\") {\n                _this2.setState({\n                  \"alerts\": {\n                    \"response\": res.response\n                  }\n                });\n              }\n            });\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"uk-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-card uk-card-default uk-card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Sign In\"), this.state.alerts !== null ? React.createElement(\"div\", {\n        className: \"uk-alert-danger\",\n        \"uk-alert\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"uk-alert-close\",\n        \"uk-close\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, this.state.alerts.response)) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.formPreventDefault,\n        onChange: this.formChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon\",\n        \"uk-icon\": \"icon: user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        id: \"username\",\n        type: \"text\",\n        placeholder: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"uk-form-icon uk-form-icon\",\n        \"uk-icon\": \"icon: lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"uk-input uk-form-width-large\",\n        type: \"password\",\n        id: \"password\",\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"uk-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"uk-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"signIn\",\n        type: \"submit\",\n        className: \"uk-input uk-button uk-button-primary uk-form-width-large\",\n        disabled: \"true\",\n        value: \"Sign In\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\n;\nexport default Signup;","map":{"version":3,"sources":["/Users/augustusrizza/javascript_projects/blog/frontend/src/Signin.js"],"names":["React","Component","encrypt","keys","env","Signup","props","formPreventDefault","bind","formChange","state","alerts","event","preventDefault","handleSignIn","username","document","getElementById","value","length","password","removeAttribute","setAttribute","console","log","fetch","getCurrent","api","headers","method","body","JSON","stringify","blog_post_api_key","then","response","json","res","parse","saltedPassword","reproduce_set","salt","user","type","setState"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport encrypt from './encrypt';\nimport keys from \"./lib/key\";\nimport env from \"./env\";\n\nclass Signup extends Component {\n    constructor(props) {\n        super(props);\n        this.formPreventDefault = this\n            .formPreventDefault\n            .bind(this);\n        this.formChange = this\n            .formChange\n            .bind(this)\n        this.state = {\n            alerts: null\n        }\n    }\n\n    formPreventDefault(event) {\n        event.preventDefault();\n        this.handleSignIn();\n    }\n    formChange() {\n        let username = document\n                .getElementById(\"username\")\n                .value\n                .length,\n            password = document\n                .getElementById(\"password\")\n                .value\n                .length;\n        if (username > 0 && password > 0) {\n            document\n                .getElementById(\"signIn\")\n                .removeAttribute(\"disabled\")\n        } else {\n            document\n                .getElementById(\"signIn\")\n                .setAttribute(\"disabled\", \"true\")\n        }\n    }\n\n    handleSignIn() {\n        let username = document\n                .getElementById(\"username\")\n                .value,\n            password = document\n                .getElementById(\"password\")\n                .value;\n        console.log(password)\n        // fetch salt for password\n        fetch(`${env.getCurrent().api}salt`, {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            method: \"POST\",\n            body: JSON.stringify({\"client_api_key\": keys.blog_post_api_key, \"username\": username})\n        }).then(response => {\n            response\n                .json()\n                .then(res => {\n                    console.log(res)\n                    res = JSON.parse(res)\n                    // create salted password\n                    let saltedPassword = encrypt.reproduce_set(password, res.salt)\n                    fetch(`${env.getCurrent().api}signin`, {\n                        headers: {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        method: \"POST\",\n                        body: JSON.stringify({\n                            \"client_api_key\": keys.blog_post_api_key,\n                            user: {\n                                \"username_or_email\": username,\n                                \"password\": saltedPassword.password\n                            }\n                        })\n                    }).then(response => {\n                        response\n                            .json()\n                            .then(res => {\n                                console.log(res)\n                                res = JSON.parse(res)\n                                console.log(res)\n                                if (res.type === \"error\") {\n                                    this.setState({\n                                        \"alerts\": {\n                                            \"response\": res.response\n                                        }\n                                    })\n                                }\n                            })\n                    })\n                })\n        })\n\n    }\n    render() {\n\n        return (\n            <div className=\"uk-container\">\n                <div className=\"uk-card uk-card-default uk-card-body\">\n                    <h1>Sign In</h1>\n                    {(this.state.alerts !== null)\n                        ? (\n                            <div className=\"uk-alert-danger\" uk-alert=\"true\">\n                                <a className=\"uk-alert-close\" uk-close=\"true\"></a>\n                                <p>{this.state.alerts.response}</p>\n                            </div>\n                        )\n                        : (\n                            <div></div>\n                        )}\n                    <form onSubmit={this.formPreventDefault} onChange={this.formChange}>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon\" uk-icon=\"icon: user\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    id=\"username\"\n                                    type=\"text\"\n                                    placeholder=\"username\"/>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <span className=\"uk-form-icon uk-form-icon\" uk-icon=\"icon: lock\"></span>\n                                <input\n                                    className=\"uk-input uk-form-width-large\"\n                                    type=\"password\"\n                                    id=\"password\"\n                                    placeholder=\"password\"/>\n                            </div>\n                        </div>\n                        <div className=\"uk-margin\">\n                            <div className=\"uk-inline\">\n                                <input\n                                    id=\"signIn\"\n                                    type=\"submit\"\n                                    className=\"uk-input uk-button uk-button-primary uk-form-width-large\"\n                                    disabled=\"true\"\n                                    value=\"Sign In\"/>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}